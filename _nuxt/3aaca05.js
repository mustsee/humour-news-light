(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{145:function(t,e,n){"use strict";n(18);var o=n(29);e.a=function(t){var e=t.store;return new Promise((function(t){o.b.onAuthStateChanged((function(n){e.commit("setUser",n),n&&e.dispatch("getUserInfos",n),t()}))}))}},146:function(t,e,n){"use strict";var o=n(3),c=n(199);o.a.use(c.a,{config:{id:"G-BPRDRJ6HZX"},appName:"humour-news-light"})},187:function(t,e,n){var content=n(272);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(119).default)("5d9ee4e1",content,!0,{sourceMap:!1})},202:function(t,e,n){"use strict";var o={computed:{currentUser:function(){return this.$store.state.user}},methods:{handleLogout:function(){this.$store.dispatch("signOut")}}},c=(n(271),n(57)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"center md:pt-2"},[n("header",{staticClass:"top h-10 md:w-10/12 md:mx-auto md:h-6 bg-light-blue leading-5 flex items-center justify-between"},[n("div",{staticClass:"left flex p-0.5"},[n("div",{staticClass:"home flex"},[n("div",{staticClass:"logo w-5 h-5 border border-gray-50 logo-color flex justify-center items-center font-black mr-1"},[n("nuxt-link",{attrs:{to:"/"}},[t._v("H")])],1),t._v(" "),n("div",{staticClass:"logo font-black"},[n("nuxt-link",{attrs:{to:"/"}},[t._v("Humour News")])],1)])]),t._v(" "),n("div",{staticClass:"right p-0.5"},[t.currentUser?[n("span",{staticClass:"mx-2"},[t._v("\n          "+t._s(t.currentUser.displayName)+"\n        ")]),t._v(" "),n("span",{staticClass:"mx-2 underline focus:outline-none cursor-pointer",on:{click:t.handleLogout}},[t._v("\n          logout\n        ")])]:[n("nuxt-link",{staticClass:"mx-2 underline focus:outline-none cursor-pointer",attrs:{to:"/login"}},[t._v("\n          login\n        ")])]],2)]),t._v(" "),n("main",{staticClass:"bg-color-main md:w-10/12 md:mx-auto pb-3"},[n("div",{staticClass:"h-3"}),t._v(" "),t.$nuxt.isOffline?n("div",{staticClass:"mb-3 font-semibold text-center"},[t._v("You are offline")]):t._e(),t._v(" "),n("Nuxt",{attrs:{"keep-alive":""}})],1)])}),[],!1,null,"2948b7d7",null);e.a=component.exports},214:function(t,e,n){n(215),t.exports=n(216)},271:function(t,e,n){"use strict";n(187)},272:function(t,e,n){var o=n(118)((function(i){return i[1]}));o.push([t.i,"/*purgecss start ignore*/\n.bg-color-main[data-v-2948b7d7]{\n  background-color:#f7f6ef\n}\n.bg-light-blue[data-v-2948b7d7]{\n  background-color:#00bfff\n}\n.logo-color[data-v-2948b7d7]{\n  color:#f9fafb\n}\n\n/*purgecss end ignore*/",""]),o.locals={},t.exports=o},273:function(t,e,n){"use strict";n.r(e),n.d(e,"strict",(function(){return c})),n.d(e,"state",(function(){return r})),n.d(e,"mutations",(function(){return l})),n.d(e,"actions",(function(){return d}));n(54),n(18),n(38);var o=n(29),c=!1,r=function(){return{links:[],user:null,votes:{},isVoting:!1}},l={setLinks:function(t,e){t.links=e},setUser:function(t,e){t.user=e},setVotes:function(t,e){t.votes=e},setVideoPoints:function(t,e){var n=e.upvote,o=e.videoId,c=t.links.map((function(link){return link.videoId===o&&(n?link.points+=1:link.points-=1),link}));t.links=c},setIsVoting:function(t,e){t.isVoting=e}},d={signOut:function(t){var e=t.commit;o.b.signOut().then((function(){e("setUser",null),e("setVotes",{})})).catch((function(t){return alert(t)}))},getLinks:function(t){var e=t.commit;o.c.collection("links").orderBy("score","desc").limit(30).get().then((function(t){var n=[];t.forEach((function(t){n.push(t.data())})),e("setLinks",n)})).catch((function(t){return console.log("getLinks error: ",t)}))},getUserInfos:function(t,e){var n=t.commit;o.c.collection("users").doc(e.email).get().then((function(t){var data=t.data();data.votes&&n("setVotes",data.votes)}))},upvote:function(t,e){var n=t.commit,c=t.state;if(!c.isVoting){n("setIsVoting",!0);var r=c.user,l=o.c.collection("users").doc(r.email),d=o.c.collection("links").doc(e);l.get().then((function(t){var data=t.data();data.votes||(data.votes={}),data.votes[e]||(data.votes[e]=!0,l.update({votes:data.votes}).then((function(){n("setVotes",data.votes),n("setIsVoting",!1),d.update({points:Object(o.d)(1)}).then((function(){n("setVideoPoints",{upvote:!0,videoId:e})})).catch((function(t){n("setIsVoting",!1),console.log("upvote videoRef update",t)}))})).catch((function(t){n("setIsVoting",!1),console.log("upvote userRef update",t)})))})).catch((function(t){n("setIsVoting",!1),console.log("upvote userRef get",t)}))}},unvote:function(t,e){var n=t.commit,c=t.state;if(!c.isVoting){var r=c.user,l=c.votes;delete l[e];var d=o.c.collection("users").doc(r.email),f=o.c.collection("links").doc(e);d.update({votes:l}).then((function(){f.update({points:Object(o.d)(-1)}).catch((function(t){return console.log("handleUnvote videoRef update",t)})),n("setVotes",Object.assign({},l)),n("setIsVoting",!1),n("setVideoPoints",{upvote:!1,videoId:e})})).catch((function(t){n("setIsVoting",!1),console.log("handleUnvote userRef update",t)}))}}}},274:function(t,e,n){t.exports={apiKey:"AIzaSyB09mLCbW4ZEenMqXUvxwS4o_0YieNT4DA",authDomain:"humour-news-light.firebaseapp.com",projectId:"humour-news-light",storageBucket:"humour-news-light.appspot.com",messagingSenderId:"25706214579",appId:"1:25706214579:web:ce6bd5b280d3179c822cc6",measurementId:"G-EGTNDZHCEK"}},29:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"d",(function(){return l})),n.d(e,"c",(function(){return d})),n.d(e,"b",(function(){return f}));var o=n(212).default,c=n(274);n(294),n(213),o.apps.length||o.initializeApp(c);var r={Google:o.auth.GoogleAuthProvider.PROVIDER_ID},l=o.firestore.FieldValue.increment,d=o.firestore(),f=o.auth()},47:function(t,e,n){"use strict";var o={props:["error"],layout:"error"},c=n(57),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[404===t.error.statusCode?n("h1",{staticClass:"text-center"},[t._v("Page not found")]):n("h1",{staticClass:"text-center"},[t._v("An error occurred")]),t._v(" "),n("div",{staticClass:"flex justify-center"},[n("NuxtLink",{staticClass:"underline",attrs:{to:"/"}},[t._v("\n      Home page\n    ")])],1)])}),[],!1,null,null,null);e.a=component.exports}},[[214,6,2,7]]]);